# Realsense D435

### ğŸ“– å®˜æ–¹å¼€å‘èµ„æº

å¼€å‘ D435 ä¸»è¦ä¾èµ– **Intel RealSense SDK 2.0 (librealsense)**ï¼Œè¿™æ˜¯å…¶æ ¸å¿ƒ SDK

- **å®˜æ–¹ GitHub ä»“åº“**ï¼šhttps://github.com/IntelRealSense/librealsenseè¿™é‡Œå¯ä»¥è·å–æœ€æ–°çš„æºä»£ç ã€ç¤ºä¾‹ç¨‹åºã€æ–‡æ¡£ä»¥åŠç¤¾åŒºè®¨è®ºã€‚
- **API æ–‡æ¡£**ï¼šSDK æä¾›äº†ä¸°å¯Œçš„ API ç”¨äºè·å–æ·±åº¦ã€å½©è‰²ã€çº¢å¤–å›¾åƒæµï¼Œä»¥åŠå¤„ç†ç‚¹äº‘ã€å¯¹é½å¸§ã€å½•åˆ¶å’Œå›æ”¾ bag æ–‡ä»¶ç­‰ã€‚è¯¦ç»†çš„ API æ–‡æ¡£é€šå¸¸åŒ…å«åœ¨åº“çš„å®‰è£…è·¯å¾„ä¸­ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥åœ¨çº¿æŸ¥é˜…ã€‚
- **å®˜æ–¹è®ºå›**ï¼šhttps://community.intel.com/t5/Intel-RealSense-SDK/bd-p/realsenseé‡åˆ°æ£˜æ‰‹çš„é—®é¢˜æ—¶å¯ä»¥åœ¨è¿™é‡Œæœç´¢æˆ–æé—®ã€‚

### ğŸ–¥ï¸ Linux ç³»ç»Ÿé©±åŠ¨å®‰è£…

åœ¨ Linux ç³»ç»Ÿä¸­ä½¿ç”¨ D435ï¼Œä½ éœ€è¦å®‰è£… `librealsense2`é©±åŠ¨åº“ã€‚å®‰è£…æ–¹å¼å¦‚ä¸‹ï¼š`Ubuntu `ç³»ç»Ÿ

```bash
# æ³¨å†ŒæœåŠ¡å™¨çš„å…¬é’¥
sudo apt-key adv --keyserver keys.gnupg.net --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE
# å°†æœåŠ¡å™¨æ·»åŠ åˆ°å­˜å‚¨åº“åˆ—è¡¨
sudo add-apt-repository "deb https://librealsense.intel.com/Debian/apt-repo $(lsb_release -cs) main" -u
# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨å¹¶å®‰è£…æ‰€éœ€çš„åŒ…
sudo apt-get update
sudo apt-get install librealsense2-dkms librealsense2-utils librealsense2-dev librealsense2-dbg
```

- `librealsense2-utils`åŒ…å«äº†åƒ `realsense-viewer`è¿™æ ·çš„å®ç”¨å·¥å…·ã€‚
- `librealsense2-dev`æ˜¯å¼€å‘æ‰€éœ€çš„å¤´æ–‡ä»¶å’Œé“¾æ¥åº“ã€‚

**å®‰è£…éªŒè¯**ï¼š

å®‰è£…å®Œæˆåï¼Œè¿æ¥ç›¸æœºï¼Œè¿è¡Œ 

```bash
realsense-viewer
```

å¦‚æœèƒ½æ­£å¸¸çœ‹åˆ°æ·±åº¦å›¾ã€RGB å›¾åƒç­‰æ•°æ®æµï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚

**æ³¨æ„**ï¼šå¦‚æœé‡åˆ°ä¸ `UEFI Secure Boot`ç›¸å…³çš„é—®é¢˜ï¼ˆä¾‹å¦‚ `Required key not available`é”™è¯¯ï¼‰ï¼Œéœ€è¦åœ¨ BIOS ä¸­æš‚æ—¶ç¦ç”¨ Secure Bootï¼Œæˆ–è€…æŒ‰ç…§ç³»ç»Ÿæç¤ºæ³¨å†Œ MOK (Machine Owner Key)ã€‚

###    å¼€å‘è¯­è¨€

ä½¿ç”¨ Python è¿›è¡Œå¼€å‘ã€‚é¦–å…ˆç¡®ä¿å®‰è£…äº† Python åŒ…è£…å™¨

```bash
pip install pyrealsense2
```

pythonè¯­è¨€çš„å®ä¾‹ä»£ç ä½äº **librealsense/wrappers/python/examples**



###  é—®é¢˜&ç­”æ¡ˆ

#### Q1ï¼šä½¿ç”¨`realsense-viewer`è®¿é—®è¿›å…¥ç›¸æœºåæ— æ³•è®¿é—®æ·±åº¦ç›¸æœº

#### Answerï¼š

ä½¿ç”¨å¦‚ä¸‹è¶…ç”¨æˆ·æƒé™è®¿é—®ï¼š

```bash
sudo realsense-viewer
```

æˆ–è€…**è®¾ç½® udev è§„åˆ™**

åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œåƒ RealSense ç›¸æœºè¿™æ ·çš„ USB è®¾å¤‡ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç»Ÿä¸€ç®¡ç†ã€‚æ™®é€šç”¨æˆ·é»˜è®¤æ²¡æœ‰æƒé™ç›´æ¥è®¿é—®è¿™äº›ç¡¬ä»¶è®¾å¤‡ã€‚è™½ç„¶æ‚¨å¯èƒ½å·²ç»å®‰è£…äº†é©±åŠ¨å’Œ SDKï¼Œä½†ç¼ºå°‘ä¸€æ­¥å…³é”®çš„é…ç½®ï¼š**è®¾ç½® udev è§„åˆ™**ã€‚

1. å®‰è£… `udev`è§„åˆ™åŒ…ï¼š

   ```bash
   sudo apt-get install librealsense2-udev-rules
   ```

2. **é‡æ–°æ’æ‹” D435 ç›¸æœº USB çº¿**ï¼š

3. ```bash
   realsense-viewer
   ```

   è®¿é—®å³å¯



#### é—®é¢˜å»¶ç”³1

è‹¥æŒ‰ç…§æ­¥éª¤2å‡ºç°å¦‚ä¸‹è¿”å›æ¶ˆæ¯ï¼š

```bash
 æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ
æ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘... å®Œæˆ
æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ                 
librealsense2-udev-rules å·²ç»æ˜¯æœ€æ–°ç‰ˆ (2.56.5-0~realsense.17054)ã€‚
librealsense2-udev-rules å·²è®¾ç½®ä¸ºæ‰‹åŠ¨å®‰è£…ã€‚
ä¸‹åˆ—è½¯ä»¶åŒ…æ˜¯è‡ªåŠ¨å®‰è£…çš„å¹¶ä¸”ç°åœ¨ä¸éœ€è¦äº†ï¼š
  libffi7
ä½¿ç”¨'sudo apt autoremove'æ¥å¸è½½å®ƒ(å®ƒä»¬)ã€‚
å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 0 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚
```

å¯èƒ½æ˜¯å› ä¸ºä¼šé‡åˆ° **å¤šä¸ªæˆ–å†²çªçš„ udev è§„åˆ™æ–‡ä»¶**ï¼Œæˆ–è€…è§„åˆ™å°šæœªå®Œå…¨ç”Ÿæ•ˆã€‚

#### è§£å†³æ–¹æ¡ˆå¦‚ä¸‹

```bash
ls /etc/udev/rules.d/ | grep -i realsense
```

å¯èƒ½ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æ–‡ä»¶ï¼š

- `60-librealsense2-udev-rules.rules`(é€šå¸¸ç”±è¾ƒæ–°ç‰ˆæœ¬çš„ `librealsense2-udev-rules`åŒ…æä¾›)
- `99-realsense-libusb.rules`(å¯èƒ½ç”±æ—§ç‰ˆ SDK æˆ–æºç ç¼–è¯‘å®‰è£…æ—¶æ‰‹åŠ¨æ·»åŠ )

- **ä¿ç•™ä¸€ä¸ª**ï¼šé€šå¸¸å»ºè®®ä¿ç•™ç‰ˆæœ¬è¾ƒæ–°æˆ–ç”±å®˜æ–¹åŒ…ç®¡ç†çš„é‚£ä¸ªï¼ˆå¦‚ `60-librealsense2-udev-rules.rules`ï¼‰ã€‚

- **åˆ é™¤å¤šä½™çš„**ï¼šå¦‚æœç¡®è®¤ `99-realsense-libusb.rules`æ˜¯æ—§ç‰ˆæœ¬é—ç•™çš„ï¼Œå¯ä»¥åˆ é™¤å®ƒï¼ˆ**å»ºè®®å…ˆå¤‡ä»½**ï¼‰ï¼š

  ```bash
  sudo rm /etc/udev/rules.d/99-realsense-libusb.rules
  ```

æ›´æ–°æˆ–åˆ é™¤è§„åˆ™æ–‡ä»¶åï¼Œ**å¿…é¡»è®© udev é‡æ–°åŠ è½½é…ç½®æ‰èƒ½ç”Ÿæ•ˆ**ã€‚

ğŸ”„ **é‡æ–°åŠ è½½ udev è§„åˆ™å¹¶è§¦å‘ï¼š**

```bash
sudo udevadm control --reload-rules && sudo udevadm trigger
```

æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©é‡å¯ udev æœåŠ¡ï¼ˆéƒ¨åˆ†ç³»ç»Ÿå¯èƒ½éœ€è¦ï¼‰ï¼š

```bash
sudo systemctl restart systemd-udevd.service
```

**å®Œæˆä¸Šè¿°ä»»ä½•æ›´æ”¹åï¼Œæœ€å…³é”®çš„ä¸€æ­¥æ˜¯ï¼šé‡æ–°æ’æ‹”ä½ çš„ D435 ç›¸æœº USB çº¿ã€‚**



#### é—®é¢˜å»¶ç”³1.1

```bash
ls /etc/udev/rules.d/ | grep -i realsense
```

æ²¡æœ‰è¾“å‡ºæ—¶ï¼Œå¯èƒ½æ˜¯åœ¨ `/etc/udev/rules.d/`ç›®å½•ä¸‹ï¼Œ**æ²¡æœ‰æ–‡ä»¶ååŒ…å« "realsense"ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰çš„è§„åˆ™æ–‡ä»¶**ã€‚æŒ‰å¦‚ä¸‹æ–¹æ³•è§£å†³ï¼š

### ğŸ” æ’æŸ¥æ­¥éª¤

```bash
ls -l /etc/udev/rules.d/ #ç›´æ¥æŸ¥çœ‹ /etc/udev/rules.d/ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶
```

```bash
ls -l /usr/lib/udev/rules.d/ | grep -i realsense
```

æŸ¥æ‰¾ç›®å½•ä¸­çš„æ‰¾åˆ°ç±»ä¼¼äº `60-librealsense2-udev-rules.rules`æˆ– `99-realsense-libusb.rules`çš„æ–‡ä»¶ã€‚ï¼ˆå‡è®¾åœ¨ `/lib/udev/rules.d/`ä¸­æ‰¾åˆ°ï¼‰

å°† `/lib/udev/rules.d/`ç›®å½•ä¸‹çš„è§„åˆ™æ–‡ä»¶é“¾æ¥åˆ° `/etc/udev/rules.d/`ç›®å½•ï¼š

```bash
sudo ln -s /lib/udev/rules.d/60-librealsense2-udev-rules.rules /etc/udev/rules.d/
```

**é‡æ–°åŠ è½½ udev è§„åˆ™å¹¶è§¦å‘**ï¼š

```bash
sudo udevadm control --reload-rules && sudo udevadm trigger
```

**é‡æ–°æ’æ‹”ä½ çš„ D435 ç›¸æœº USB çº¿**

**å¦‚æœè§„åˆ™æ–‡ä»¶ç¡®å®ä¸å­˜åœ¨**ï¼šé‡æ–°å®‰è£…åŒ…åï¼Œ`/etc/udev/rules.d/`ç›®å½•ä¸‹ä¾ç„¶æ²¡æœ‰å¯¹åº”çš„è§„åˆ™æ–‡ä»¶ï¼Œé‚£å¯èƒ½æ˜¯åŒ…æœ¬èº«çš„é—®é¢˜ã€‚ä½ å¯ä»¥å°è¯•**æ‰‹åŠ¨åˆ›å»ºè§„åˆ™æ–‡ä»¶**ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºå¹¶ç¼–è¾‘ä¸€ä¸ªè§„åˆ™æ–‡ä»¶

```bash
sudo touch /etc/udev/rules.d/99-realsense-libusb.rules
```

ä¹‹åï¼Œéœ€è¦**æ‰‹åŠ¨ç¼–è¾‘æ­¤æ–‡ä»¶**ï¼Œå°†æ­£ç¡®çš„è§„åˆ™å†…å®¹ï¼ˆé€šå¸¸å¯ä»¥åœ¨ Librealsense çš„æºç ä¸­çš„ `scripts`ç›®å½•æ‰¾åˆ°ï¼‰æ·»åŠ è¿›å»ï¼Œä¿å­˜å**é‡æ–°åŠ è½½ udev è§„åˆ™**å¹¶**é‡æ–°æ’æ‹”ç›¸æœº**ã€‚
